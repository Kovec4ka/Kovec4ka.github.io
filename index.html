<!DOCTYPE html>
<html>
<head>
  <title>Калькулятор цен</title>
  <style>
    body {
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }

    .hidden {
      display: none;
    }

    #total {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Калькулятор цен</h1>

    <div id="login">
      <h2>Вход</h2>
      <input type="text" id="username" placeholder="Введите имя">
      <button onclick="login()">Войти</button>
    </div>

    <div id="content" class="hidden">
      <h2>Ваши данные</h2>
      <p>Привет, <span id="user-name"></span>!</p>

      <div id="total">
        Общая сумма: 0
      </div>

      <button onclick="resetTotal()">Обнулить счет</button>
      <button onclick="removeLast()">Убрать предыдущее</button>

      <button id="toggle-button">Показать все услуги</button>
      <div id="services" class="hidden">
        <div class="button-group">
          <button onclick="addPrice('эконом1 (I)', 800)">эконом1 (I)</button>
          <button onclick="addPrice('эконом2 (I)', 1300)">эконом2 (I)</button>
          <button onclick="addPrice('нано1 (I)', 900)">нано1 (I)</button>
          <button onclick="addPrice('нано2 (I)', 1400)">нано2 (I)</button>
          <button onclick="addPrice('эконом1 (II)', 1000)">эконом1 (II)</button>
          <button onclick="addPrice('эконом2 (II)', 1500)">эконом2 (II)</button>
          <button onclick="addPrice('нано1 (II)', 1200)">нано1 (II)</button>
          <button onclick="addPrice('нано2 (II)', 1700)">нано2 (II)</button>
          <button onclick="addPrice('экспресс (I)', 500)">экспресс (I)</button>
          <button onclick="addPrice('экспресс (II)', 600)">экспресс (II)</button>
          <button onclick="addPrice('экспресс (IV)', 1000)">экспресс (IV)</button>
          <button onclick="addPrice('кварц1 (I)', 2000)">кварц1 (I)</button>
          <button onclick="addPrice('кварц2 (I)', 2500)">кварц2 (I)</button>
          <button onclick="addPrice('кварц1 (II)', 2200)">кварц1 (II)</button>
          <button onclick="addPrice('кварц2 (II)', 2700)">кварц2 (II)</button>
        </div>
        <div class="button-group">
          <button onclick="addPrice('салон I', 1000)">салон I</button>
          <button onclick="addPrice('салон II', 1300)">салон II</button>
          <button onclick="addPrice('днище', 400)">днище</button>
          <button onclick="addPrice('чернение', 300)">чернение</button>
          <button onclick="addPrice('силикон', 250)">силикон</button>
          <button onclick="addPrice('полировка пластика', 500)">полировка пластика</button>
          <button onclick="addPrice('двигатель', 2500)">двигатель</button>
        </div>
      </div>
    </div>

    <script>
      let total = 0;
      let selectedServices = [];

      // Загружаем данные из localStorage при загрузке страницы
      window.onload = () => {
        loadSavedData();
      };

      function addPrice(service, price) {
        total += price;
        selectedServices.push(service);
        updateTotal();
        saveSelectedServices();
      }

      function updateTotal() {
        document.getElementById('total').textContent = `Общая сумма: ${total} (с учетом скидки: ${Math.round(total - (total * 0.27))})`;
      }

      function resetTotal() {
        total = 0;
        selectedServices = [];
        updateTotal();
        saveSelectedServices();
      }

      function removeLast() {
        if (selectedServices.length > 0) {
          const lastService = selectedServices.pop();
          const price = getPrice(lastService);
          total -= price;
          updateTotal();
          saveSelectedServices();
        }
      }
      function getPrice(service) {
        switch (service) {
          case 'эконом1 (I)': return 800;
		  case 'эконом1 (II)': return 1000;
		  case 'эконом2 (I)': return 1300;
		  case 'эконом2 (II)': return 1500;
		  
          
          case 'нано1 (I)': return 900;
          case 'нано2 (I)': return 1400;
		  case 'нано1 (II)': return 1200;
          case 'нано2 (II)': return 1700;
          
		  
          case 'экспресс (I)': return 500;
          case 'экспресс (II)': return 600;
          case 'экспресс (IV)': return 1000;
		  
          case 'кварц1 (I)': return 2000;
          case 'кварц2 (I)': return 2500;
          case 'кварц1 (II)': return 2200;
          case 'кварц2 (II)': return 2700;
		  
          case 'салон I': return 1000;
          case 'салон II': return 1300;
          case 'днище': return 400;
          case 'чернение': return 300;
          case 'силикон': return 250;
          case 'полировка пластика': return 500;
          case 'двигатель': return 2500;
          default: return 0;
        }
      }

      function login() {
        const username = document.getElementById('username').value;
        if (username) {
          document.getElementById('user-name').textContent = username;
          document.getElementById('content').classList.remove('hidden');
          document.getElementById('login').classList.add('hidden');
          saveUsername(username);
        }
      }

      function saveUsername(username) {
        localStorage.setItem('username', username);
      }

      function saveSelectedServices() {
        localStorage.setItem('selectedServices', JSON.stringify(selectedServices));
      }

      function loadSavedData() {
        const username = localStorage.getItem('username');
        if (username) {
          document.getElementById('user-name').textContent = username;
          document.getElementById('content').classList.remove('hidden');
          document.getElementById('login').classList.add('hidden');
        }

        const savedServices = localStorage.getItem('selectedServices');
        if (savedServices) {
          selectedServices = JSON.parse(savedServices);
          for (const service of selectedServices) {
            const price = getPrice(service);
            total += price;
          }
          updateTotal();
        }
      }

      document.getElementById('toggle-button').addEventListener('click', () => {
        const servicesElement = document.getElementById('services');
        servicesElement.classList.toggle('hidden');
        if (servicesElement.classList.contains('hidden')) {
          document.getElementById('toggle-button').textContent = 'Показать все услуги';
        } else {
          document.getElementById('toggle-button').textContent = 'Скрыть услуги';
        }
      });
    </script>
  </div>
</body>
</html>